diff --git a/source/dng_mutex.cpp b/source/dng_mutex.cpp
index a8b2a6f..eab56f6 100644
--- a/source/dng_mutex.cpp
+++ b/source/dng_mutex.cpp
@@ -333,7 +333,7 @@ bool dng_condition::Wait (dng_mutex &mutex, double timeoutSecs)
 	else
 		{
 		
-		struct timespec now;
+		struct dng_timespec now;
 
 		dng_pthread_now (&now);
 
diff --git a/source/dng_pthread.cpp b/source/dng_pthread.cpp
index 0347856..fb36bce 100644
--- a/source/dng_pthread.cpp
+++ b/source/dng_pthread.cpp
@@ -1096,7 +1096,7 @@ void dng_pthread_terminate()
 
 /*****************************************************************************/
 
-int dng_pthread_now (struct timespec *now)
+int dng_pthread_now (struct dng_timespec *now)
 	{
 	
 	if (now == NULL)
diff --git a/source/dng_pthread.h b/source/dng_pthread.h
index 0a28a1b..b7d3383 100644
--- a/source/dng_pthread.h
+++ b/source/dng_pthread.h
@@ -179,7 +179,7 @@ void dng_pthread_terminate();
 #undef PTHREAD_ONCE_INIT
 #define PTHREAD_ONCE_INIT DNG_PTHREAD_ONCE_INIT
 
-#define timespec dng_timespec
+//#define timespec dng_timespec
 
 /* If it is defined on Windows, it probably has the wrong value... */
 #if defined(WIN32) || !defined(ETIMEDOUT)
@@ -249,7 +249,7 @@ extern "C"
 {
 #endif
 
-int dng_pthread_now (struct timespec *now);
+int dng_pthread_now (struct dng_timespec *now);
 
 #ifdef __cplusplus
 }
